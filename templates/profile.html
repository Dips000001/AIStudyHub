{% extends "base.html" %}

{% block title %}Your Profile{% endblock %}

{% block content %}
    <h2>Profile & Settings</h2>

    {% if message %}
        <div class="message">{{ message }}</div>
    {% endif %}

    <div class="grid-container">
        <div class="card">
            <h3>Update Your Information</h3>
            <form method="post">
                <div class="form-group">
                    <label for="major">Major</label>
                    <input type="text" id="major" name="major" class="form-control" value="{{ user.major or '' }}">
                </div>
                <div class="form-group">
                    <label for="year">Year</label>
                    <input type="number" id="year" name="year" class="form-control" value="{{ user.year or '' }}">
                </div>
                <div class="form-group">
                    <label for="courses">Courses (comma-separated)</label>
                    <input type="text" id="courses" name="courses" class="form-control" value="{{ user.courses or '' }}">
                </div>
                <div class="form-group">
                    <label for="reading_goals">Reading Goals</label>
                    <input type="text" id="reading_goals" name="reading_goals" class="form-control" value="{{ user.reading_goals or '' }}">
                </div>
                <button type="submit" class="btn">Update Profile</button>
            </form>
        </div>

        <div class="card">
            <h3>Your Borrowing History</h3>
            {% if history %}
            <ul>
                {% for item in history %}
                    <li>{{ item.title }} ({{ item.type.replace('_', ' ')|title }})</li>
                {% endfor %}
            </ul>
            {% else %}
            <p>You have not borrowed any resources yet.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}